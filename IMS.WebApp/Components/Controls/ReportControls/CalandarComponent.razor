@using System.Globalization

<div class="card shadow-sm">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="card-title mb-0">@CurrentMonthName @CurrentDate.Year</h5>
            <div>
                <button class="btn btn-light btn-sm me-1" @onclick="PrevMonth">
                    <i class="bi bi-chevron-left"></i>
                </button>
                <button class="btn btn-light btn-sm" @onclick="NextMonth">
                    <i class="bi bi-chevron-right"></i>
                </button>
            </div>
        </div>

        <div class="text-center fw-semibold text-muted mb-2">
            <div class="row row-cols-7 g-0">
                @foreach (var day in DayLabels)
                {
                    <div class="col small">@day</div>
                }
            </div>
        </div>

        <div class="row row-cols-7 g-1 text-center">
            @for (int i = 0; i < FirstDayOffset; i++)
            {
                <div class="col"></div>
            }
            @for (int d = 1; d <= DaysInMonth; d++)
            {
                bool isToday = d == 10 && CurrentDate.Month == 1;
                <div class="col">
                    <button class="btn btn-sm w-100 @GetDayClass(isToday)">
                        @d
                    </button>
                </div>
            }
        </div>
    </div>
</div>

@code {
    private DateTime CurrentDate = new DateTime(2025, 1, 1);

    private string[] DayLabels = new[] { "Su", "Mo", "Tu", "We", "Th", "Fr", "Sa" };
    private int DaysInMonth => DateTime.DaysInMonth(CurrentDate.Year, CurrentDate.Month);
    private int FirstDayOffset => (int)new DateTime(CurrentDate.Year, CurrentDate.Month, 1).DayOfWeek;
    private string CurrentMonthName => CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(CurrentDate.Month);

    private void PrevMonth() => CurrentDate = CurrentDate.AddMonths(-1);
    private void NextMonth() => CurrentDate = CurrentDate.AddMonths(1);

    private string GetDayClass(bool isToday) =>
        isToday ? "btn-primary text-white fw-semibold" : "btn-outline-light text-dark";
}
